@using ItsaWeb.Resources
@model dynamic

@{
    ViewBag.Title = Resources.ItsaHomeTitle;
}
<style>
   ul#posts { list-style-type: none;margin: 0;}
</style>

<div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container-fluid">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>
            <a class="brand">Itsa Knockout</a>
            <div class="nav-collapse">
                <ul class="nav">
                    <li class="active"><a href="#"><i class="icon-home icon-white"></i>Home</a></li>
                    <li data-bind="visible: isAuthenticated">@Html.ActionLink("Deregister", "Delete", "User", new { }, new { id = "deregister" })</li>
                    <li data-bind="visible: isAuthenticated">@Html.ActionLink("Logout", "Delete", "Session", new { }, new { id = "logout" })</li>
                    <li data-bind="visible: !isAuthenticated()">@Html.ActionLink("Login", "New", "Session", new { }, new { id = "login" })</li>
                    <li><a href="#about">About</a></li>
                    <li><a href="#contact">Contact</a></li>
                </ul>
                <ul class="nav pull-right">
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown"><b class="caret"></b>Utility</a>
                        <ul class="dropdown-menu">
                            <li><a href="#">Link 1</a></li>
                            <li><a href="#">Link 2</a></li>
                            <li><a href="#">Link 3</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>
<div id="message" data-bind="text: message"></div>
<div class="container-fluid">
    <div class="hero-unit">
        <h2>title</h2>
    </div>
    <div class="row-fluid">
        <div class="span12">
            <div data-bind="visible: isAuthenticated">
                <h1 id="username" data-bind="text: name"></h1>
                <div>
                    <input type="button" id="addBlogPost" data-bind="click: addBlogPost" value="@Resources.AddBlogPostTitle" />
                </div>
                <div id="createBlogPostPanel" data-bind="animate: isCreatingBlogPost()" style="min-height: 300px; border: solid 1px black">
                    <div>Title:</div>
                    <div>
                        <input type="text" id="postTitle" data-bind="value: newPost.postTitle, valueUpdate: 'afterkeydown'" class="formfields" />
                    </div>
                    <div>Entry:</div>
                    <div>
                        <textarea id="postBody" data-bind="value: newPost.postBody, valueUpdate: 'afterkeydown'" class="formfields"></textarea>
                    </div>
                    <div>
                        <input type="button" value="@Resources.CreateBlogPostTitle" data-bind="click: newPost.add" id="createBlogPost"/>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row-fluid">
        <div class="span8">
            <div id="mainsection" data-bind="with: blogPosts">
                <ul id="posts" data-bind="foreach: posts">
                    @Html.Partial("_BlogEntry")
                </ul>
            </div>
        </div>
        <div class="span4">
        </div>
    </div>
</div>
